(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cea157a"],{"02f8":function(t,a,e){},"0a10":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/login/user"}}},[t._v("用户首页")]),e("el-breadcrumb-item",[t._v("商品管理")]),e("el-breadcrumb-item",[t._v("分类参数")])],1),e("el-card",{staticStyle:{"margin-top":"10px"},attrs:{shadow:"always"}},[e("el-alert",{attrs:{title:"注意：只允许为第三级分类设置相关参数！",type:"warning",effect:"dark",closable:!1,"show-icon":""}}),e("div",{staticClass:"yx_good"},[e("span",{staticClass:"demonstration"},[t._v("选择商品分类:")]),e("el-cascader",{attrs:{options:t.paramsList,props:t.paramsProps,"expand-trigger":"hover"},on:{change:t.handleChange},model:{value:t.selectParamsList,callback:function(a){t.selectParamsList=a},expression:"selectParamsList"}}),e("el-tabs",{staticClass:"yx_tabs",attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(a){t.activeName=a},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[e("el-button",{attrs:{disabled:t.isDisabled,size:"mini",type:"primary"},on:{click:function(a){t.manyDialog=!0}}},[t._v("添加参数")]),e("el-table",{staticStyle:{width:"100%"},attrs:{type:"expand",data:t.manyTableData}},[e("el-table-column",{attrs:{type:"expand",width:"100"}}),e("el-table-column",{attrs:{prop:"attr_id",label:"#",width:"180"}}),e("el-table-column",{attrs:{prop:"attr_name",label:"参数名",width:"400"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.compileForm(a.row.attr_id)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.remove(a.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),e("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[e("el-button",{attrs:{disabled:t.isDisabled,size:"mini",type:"primary"},on:{click:function(a){t.manyDialog=!0}}},[t._v("添加属性")]),e("el-table",{staticStyle:{width:"100%"},attrs:{type:"expand",data:t.onlyTableData}},[e("el-table-column",{attrs:{type:"expand",width:"100"}}),e("el-table-column",{attrs:{prop:"attr_id",label:"#",width:"180"}}),e("el-table-column",{attrs:{prop:"attr_name",label:"参数名",width:"400"}}),e("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.compileForm(a.row.attr_id)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.remove(a.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1)],1),e("el-dialog",{attrs:{title:"添加"+t.titleText,visible:t.manyDialog},on:{"update:visible":function(a){t.manyDialog=a},close:t.addClose}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.addParamsForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[e("el-input",{model:{value:t.addParamsForm.attr_name,callback:function(a){t.$set(t.addParamsForm,"attr_name",a)},expression:"addParamsForm.attr_name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addParams}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"修改"+t.titleText,visible:t.isManyDialog},on:{"update:visible":function(a){t.isManyDialog=a},close:t.isClose}},[e("el-form",{ref:"isRuleForm",attrs:{model:t.isParamsForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:t.titleText,prop:"attr_name"}},[e("el-input",{model:{value:t.isParamsForm.attr_name,callback:function(a){t.$set(t.isParamsForm,"attr_name",a)},expression:"isParamsForm.attr_name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.isManyDialog=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.isParams}},[t._v("确 定")])],1)],1)],1)},i=[],r={data(){return{paramsList:[],paramsProps:{value:"cat_id",label:"cat_name",children:"children"},selectParamsList:[],activeName:"many",manyTableData:[],onlyTableData:[],manyDialog:!1,addParamsForm:{attr_name:""},isManyDialog:!1,isParamsForm:{},rules:{attr_name:[{required:!0,message:"请输入正确的参数",trigger:"blur"}]}}},created(){},mounted(){this.getparamsList()},methods:{async getparamsList(){const{data:t}=await this.$axios.get("https://www.liulongbin.top:8888/api/private/v1/categories");console.log(t),200==t.meta.status?(this.$message.success(t.meta.msg),this.paramsList=t.data,console.log()):this.$message.error(t.meta.msg)},handleChange(){this.getParamsData()},handleClick(){this.getParamsData(),console.log(this.activeName)},async getParamsData(){if(console.log(this.selectParamsList),3!==this.selectParamsList.length)return void(this.selectParamsList=[]);console.log(this.selectParamsList);const{data:t}=await this.$axios.get(`https://www.liulongbin.top:8888/api/private/v1/categories/${this.catId}/attributes`,{params:{sel:this.activeName}});200!==t.meta.status&&this.$message.error("获取数据失败"),console.log(t),"many"===this.activeName?this.manyTableData=t.data:this.onlyTableData=t.data},addClose(){this.$refs.ruleForm.resetFields()},async addParams(){const{data:t}=await this.$axios.post(`https://www.liulongbin.top:8888/api/private/v1/categories/${this.catId}/attributes`,{attr_name:this.addParamsForm.attr_name,attr_sel:this.activeName});if(201!==t.meta.status)return this.$message.error("获取数据失败");this.$message.success("获取数据成功"),this.getParamsData(),this.manyDialog=!1,console.log(t)},async compileForm(t){const{data:a}=await this.$axios.get(`https://www.liulongbin.top:8888/api/private/v1/categories/${this.catId}/attributes/${t}`,{params:{attr_sel:this.activeName}});if(console.log(a),200!==a.meta.status)return this.$message.error("获取参数信息失败");this.isParamsForm=a.data,this.isManyDialog=!0},isParams(){this.$refs.isRuleForm.validate(async t=>{if(!t)return;const{data:a}=await this.$axios.put(`https://www.liulongbin.top:8888/api/private/v1/categories/${this.catId}/attributes/${this.isParamsForm.attr_id}`,{attr_name:this.isParamsForm.attr_name,attr_sel:this.activeName});console.log(a),200!==a.meta.status&&this.$message.error(a.meta.msg),this.getParamsData(),this.isManyDialog=!1})},async remove(t){console.log(t);const{data:a}=await this.$axios.delete(`https://www.liulongbin.top:8888/api/private/v1/categories/${this.catId}/attributes/${t}`);console.log(a),200==a.meta.status?(this.$message.success(a.meta.msg),this.getParamsData()):this.$message.error(a.meta.msg)},isClose(){this.$refs.isRuleForm.resetFields()},delForm(){}},computed:{isDisabled(){return 3!==this.selectParamsList.length},catId(){return 3==this.selectParamsList.length?this.selectParamsList[2]:null},titleText(){return"many"===this.activeName?"动态参数":"静态属性"}},components:{}},l=r,o=(e("c272"),e("2877")),n=Object(o["a"])(l,s,i,!1,null,"108dd5cd",null);a["default"]=n.exports},c272:function(t,a,e){"use strict";e("02f8")}}]);